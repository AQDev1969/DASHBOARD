"use strict";(self["webpackChunkhc2"]=self["webpackChunkhc2"]||[]).push([[420],{1420:(e,l,a)=>{a.r(l),a.d(l,{default:()=>V});var t=a(3673),o=a(2323);const n={class:"q-pa-md"},s={class:"row"},r={class:"col-2"},i={key:0,class:"text-negative"},u={key:1,class:"q-mt-sm"},d={class:"q-pa-md q-gutter-sm"},c=(0,t._)("div",{class:"text-h6"},"Modification",-1),m=(0,t.Uk)(" Mise à jour USER. ");function p(e,l,a,p,v,w){const g=(0,t.up)("q-icon"),f=(0,t.up)("q-badge"),h=(0,t.up)("q-input"),b=(0,t.up)("q-select"),k=(0,t.up)("q-spinner-clock"),y=(0,t.up)("q-td"),x=(0,t.up)("q-tr"),R=(0,t.up)("q-table"),W=(0,t.up)("q-card-section"),q=(0,t.up)("q-btn"),_=(0,t.up)("q-card-actions"),C=(0,t.up)("q-card"),E=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",s,[(0,t.Wm)(h,{class:"col-9 col-md-4 q-mr-sm q-mb-sm",ref:"searchInput",dense:"dense",color:"grey-3","label-color":"orange",outlined:"",modelValue:p.text,"onUpdate:modelValue":l[1]||(l[1]=e=>p.text=e),label:p.searchLabel},{append:(0,t.w5)((()=>[""===p.text?((0,t.wg)(),(0,t.j4)(g,{key:0,name:"search",color:"orange"})):((0,t.wg)(),(0,t.j4)(g,{key:1,name:"clear",class:"cursor-pointer",onClick:l[0]||(l[0]=e=>p.text="")})),(0,t.Wm)(f,{color:"orange","text-color":"white"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(p.dataFiltered.length),1)])),_:1})])),_:1},8,["modelValue","label"]),(0,t.Wm)(b,{class:"col-9 col-md-4 q-mr-sm",color:"teal",outlined:"","label-color":"orange",dense:"dense","options-dense":"options-dense","transition-show":"jump-down","transition-hide":"jump-up",modelValue:p.searchField,"onUpdate:modelValue":l[2]||(l[2]=e=>p.searchField=e),options:p.searchableList,label:"Recherche sur"},{append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"blur_on",color:"orange"})])),_:1},8,["modelValue","options"]),(0,t.Wm)(g,{class:"q-mr-sm",style:{"font-size":"2em"},name:"add_circle",onClick:p.onAddNew},null,8,["onClick"]),(0,t._)("div",r,[(0,t.Wm)(g,{class:"q-mr-sm",style:{"font-size":"2em"},name:"refresh",onClick:p.onRefresh},null,8,["onClick"]),p.inLoad?((0,t.wg)(),(0,t.j4)(k,{key:0,style:{"font-size":"2em"},color:"orange"})):(0,t.kq)("",!0)])]),0===p.status?((0,t.wg)(),(0,t.iD)("h4",i,(0,o.zw)(p.erreur),1)):(0,t.kq)("",!0),p.dataFiltered.length?((0,t.wg)(),(0,t.iD)("div",u,[(0,t.Wm)(R,{color:"secondary",rows:p.dataFiltered,columns:p.columns,pagination:p.initialPagination,loading:p.inLoad,"row-key":"id",dense:"",onRowClick:p.onRowClick,flat:""},{body:(0,t.w5)((e=>[(0,t.Wm)(x,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{key:"but1",style:{color:"'red'"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{style:{"font-size":"1.5em","background-color":"'red'"},name:"edit",onClick:l=>p.onTest(e.row)},null,8,["onClick"])])),_:2},1024),(0,t.Wm)(y,{key:"but2"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"q-mr-sm",style:{"font-size":"1.5em"},name:"delete_forever"})])),_:1}),(0,t.Wm)(y,{key:"id",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{color:"green"},{default:(0,t.w5)((()=>[(0,t.Uk)("#"+(0,o.zw)(e.row.id),1)])),_:2},1024)])),_:2},1032,["props"]),(0,t.Wm)(y,{key:"prenom",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.firstname),1)])),_:2},1032,["props"]),(0,t.Wm)(y,{key:"nom",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.lastname),1)])),_:2},1032,["props"]),(0,t.Wm)(y,{key:"email",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.email),1)])),_:2},1032,["props"]),(0,t.Wm)(y,{key:"date",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.reg_date),1)])),_:2},1032,["props"]),(0,t.Wm)(y,{key:"password",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.password),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","onRowClick"])])):(0,t.kq)("",!0),(0,t._)("div",d,[(0,t.Wm)(E,{modelValue:p.persistent,"onUpdate:modelValue":l[6]||(l[6]=e=>p.persistent=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"bg-grey text-white",style:{width:"300px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(W,{class:"q-pt-none"},{default:(0,t.w5)((()=>[m,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(p.inputs,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e},[(0,t.Wm)(h,{color:"white",dense:"",filled:"",modelValue:e.text,"onUpdate:modelValue":l=>e.text=l,type:e.type,label:e.label,"lazy-rules":"",rules:e.inputRules,"input-style":{color:"blue"}},null,8,["modelValue","onUpdate:modelValue","type","label","rules"])])))),128))])),_:1}),(0,t.Wm)(_,{align:"right",class:"bg-white text-teal"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{flat:"",label:"ENREGISTRER",onClick:l[3]||(l[3]=e=>p.onUpdate())}),(0,t.Wm)(q,{flat:"",label:"CREER",onClick:l[4]||(l[4]=l=>e.onCreate())}),(0,t.Wm)(q,{flat:"",label:"ANNULER",onClick:l[5]||(l[5]=e=>p.persistent=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var v=a(1959);a(6701),a(2100);const w=()=>{const e=(0,v.iH)([]),l=(0,v.iH)([]),a=(0,v.iH)(null),t=(0,v.iH)(null),o=(0,v.iH)(null),n=async()=>{try{const n=await fetch("http://localhost:3000/users",{method:"GET",headers:{"content-type":"application/json"}});if(console.log(n.ok),!n.ok){console.log("res ko");const e=new Error(n.statusText);throw e.json=n.json(),alert(e),o.value=!1,e}const s=await n.json();e.value=s,l.value=s,a.value=s.erreur,t.value=s.status,o.value=!1}catch(n){o.value=!1,t.value=0,a.value="NETWORK ERROR"}},s=async(n,s)=>{try{const r=await fetch("http://localhost:3000/users/"+n,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(s)});if(console.log(r.ok),!r.ok){console.log("res ko");const e=new Error(r.statusText);throw e.json=r.json(),alert(e),o.value=!1,e}const i=await r.json();e.value=i,l.value=i,a.value=i.erreur,t.value=i.status,o.value=!1}catch(r){o.value=!1,t.value=0,a.value="NETWORK ERROR"}};return{data:e,dataFiltered:l,status:t,erreur:a,inLoad:o,load:n,update:s}},g=w;var f=a(1082);const h=[{name:"but1",required:!1,align:"center",label:"Edit",align:"right",sortable:!0,searchable:!1},{name:"but2",label:"Delete",align:"center",sortable:!0,searchable:!0},{name:"id",required:!1,label:"ID",align:"right",field:e=>e.id,sortable:!0,searchable:!1},{name:"prenom",align:"left",label:"PRENOM",field:"firstname",sortable:!0,searchable:!0},{name:"nom",align:"left",label:"NOM",field:"lastname",sortable:!0,searchable:!0,searchDefault:!0},{name:"email",align:"left",label:"E-MAIL",field:"email",sortable:!0,searchable:!0},{name:"date",align:"left",label:"DATE",field:"reg_date",format:e=>f.ZP.formatDate(e,"DD-MM-YYYY"),sortable:!0,serchable:!1},{name:"password",align:"left",label:"MOT DE PASSE",field:"password",sortable:!1,searchable:!1}],b={name:"myForm",setup(){const e=(0,v.iH)(null),l=(0,v.iH)(null),a=(0,v.iH)(!1),o=(0,v.iH)(!1),n=(0,v.iH)(),s=(0,v.iH)([{text:"",name:"fistname",type:"text",label:"Prénom",inputRules:[e=>e&&e.length>0||"Renseigner le prénom"]},{text:"",name:"lastname",type:"text",label:"Nom",inputRules:[e=>e&&e.length>0||"Renseigner le nom"]},{text:"",name:"email",type:"mail",label:"Email",inputRules:[e=>e&&e.length>0||"Renseigner email"]},{text:"",name:"password",type:"password",label:"Mot de passe",inputRules:[e=>e&&e.length>0||"Renseigner email"]}]),r=(0,v.iH)(null),{data:i,dataFiltered:u,erreur:d,status:c,inLoad:m,load:p,update:w}=g(),f=(0,v.iH)(),b=(0,v.iH)({searchLabel:"Article"}),k=(0,v.iH)(""),y=h.filter((e=>e.searchable)),x=(0,v.iH)(h.filter((e=>e.searchDefault))[0].label),R=(0,v.iH)(h.filter((e=>e.searchDefault))[0]),W=((0,v.iH)(),(0,t.YP)(k,(()=>{console.log(k.value),u.value=U(R.value["field"])})),(0,t.YP)(R,(()=>{x.value=R.value["label"],k.value="",r.value.focus()})),(0,t.m0)((()=>{console.log("watcheffect",m.value)}))),q=()=>{c.value=null,d.value=null,k.value="",m.value=!0,p(),console.log(u.value),W()},_=(e,l)=>{console.log(l),n.value=l.id,s.value[0].text=l.firstname,s.value[1].text=l.lastname,s.value[2].text=l.email,s.value[3].text=l.password,o.value=!0},C=e=>{console.log(e),n.value=e.id,s.value[0].text=e.firstname,s.value[1].text=e.lastname,s.value[2].text=e.email,s.value[3].text=e.password,o.value=!0},E=()=>{o.value=!1,f.value={firstname:s.value[0].text,lastname:s.value[1].text,email:s.value[2].text,password:s.value[3].text},console.log(f.value),w(n.value,f.value).then((()=>{u.value=U(R.value["field"])}))},H=()=>{o.value=!0,s.value[0].text="",s.value[1].text="",s.value[2].text="",s.value[3].text=""},U=e=>{const l=i.value.filter((l=>l[e].includes(k.value)));return console.log(l),l};return(0,t.bv)((()=>{console.log("onMounted")})),(0,t.Ah)((()=>{console.log("unMounted")})),m.value=!0,p(),{initialPagination:{sortBy:"asc",descending:!0,page:1,rowsPerPage:10},formSetUp:b,text:k,onRefresh:q,dataFiltered:u,data:i,columns:h,onRowClick:_,erreur:d,status:c,inLoad:m,searchInput:r,searchField:R,searchableList:y,searchLabel:x,name:e,age:l,accept:a,inputs:s,persistent:o,update:w,onUpdate:E,onAddNew:H,onTest:C,dataId:n,dataModel:f,onSubmit(){!0!==a.value?console.log("You need to accept the license and terms first"):console.log("Submitted")},onReset(){e.value=null,l.value=null,a.value=!1}}}};var k=a(4260),y=a(4842),x=a(4554),R=a(9721),W=a(5106),q=a(126),_=a(2991),C=a(8186),E=a(3884),H=a(6778),U=a(151),D=a(5589),Z=a(9367),j=a(8240),z=a(7518),T=a.n(z);const Q=(0,k.Z)(b,[["render",p]]),V=Q;T()(b,"components",{QInput:y.Z,QIcon:x.Z,QBadge:R.Z,QSelect:W.Z,QSpinnerClock:q.Z,QTable:_.Z,QTr:C.Z,QTd:E.Z,QDialog:H.Z,QCard:U.Z,QCardSection:D.Z,QCardActions:Z.Z,QBtn:j.Z})}}]);