"use strict";(self["webpackChunkhc2"]=self["webpackChunkhc2"]||[]).push([[688],{3688:(e,l,a)=>{a.r(l),a.d(l,{default:()=>F});var t=a(3673),o=a(2323);const n={class:"q-pa-md"},s={class:"q-gutter-md q-mb-sm"},r={class:"row"},i={class:"col-2"},u={key:0,class:"text-negative"},d={key:1,class:"q-mt-sm"},c={key:2,class:"q-mt-sm"},m={class:"q-pa-md q-gutter-sm"},p=(0,t._)("div",{class:"text-h6"},"Modification",-1),w=(0,t.Uk)(" Mise à jour USER. ");function g(e,l,a,g,v,f){const b=(0,t.up)("q-btn"),h=(0,t.up)("q-icon"),k=(0,t.up)("q-input"),y=(0,t.up)("q-toolbar"),x=(0,t.up)("q-badge"),R=(0,t.up)("q-select"),W=(0,t.up)("q-spinner-clock"),q=(0,t.up)("q-table"),_=(0,t.up)("q-td"),C=(0,t.up)("q-tr"),E=(0,t.up)("q-card-section"),U=(0,t.up)("q-card-actions"),H=(0,t.up)("q-card"),j=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",s,[(0,t.Wm)(y,{class:"bg-positive text-white rounded-borders"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{dense:"",color:"cyan-5",label:"Modifier"}),(0,t.Wm)(b,{dense:"",color:"cyan-7",label:"Ajouter"}),(0,t.Wm)(b,{dense:"",color:"cyan-9",label:"Refresh"}),(0,t.Wm)(k,{dark:"",dense:"",standout:"",modelValue:g.text,"onUpdate:modelValue":l[1]||(l[1]=e=>g.text=e),"input-class":"text-left",class:"q-ml-md"},{append:(0,t.w5)((()=>[""===g.text?((0,t.wg)(),(0,t.j4)(h,{key:0,name:"search"})):((0,t.wg)(),(0,t.j4)(h,{key:1,name:"clear",class:"cursor-pointer",onClick:l[0]||(l[0]=e=>g.text="")}))])),_:1},8,["modelValue"])])),_:1})]),(0,t._)("div",r,[(0,t.Wm)(k,{class:"col-9 col-md-4 q-mr-sm q-mb-sm",ref:"searchInput",dense:"dense",color:"grey-3","label-color":"orange",outlined:"",modelValue:g.text,"onUpdate:modelValue":l[3]||(l[3]=e=>g.text=e),label:g.searchLabel},{append:(0,t.w5)((()=>[""===g.text?((0,t.wg)(),(0,t.j4)(h,{key:0,name:"search",color:"orange"})):((0,t.wg)(),(0,t.j4)(h,{key:1,name:"clear",class:"cursor-pointer",onClick:l[2]||(l[2]=e=>g.text="")})),(0,t.Wm)(x,{color:"orange","text-color":"white"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(g.dataFiltered.length),1)])),_:1})])),_:1},8,["modelValue","label"]),(0,t.Wm)(R,{class:"col-9 col-md-4 q-mr-sm",color:"teal",outlined:"","label-color":"orange",dense:"dense","options-dense":"options-dense","transition-show":"jump-down","transition-hide":"jump-up",modelValue:g.searchField,"onUpdate:modelValue":l[4]||(l[4]=e=>g.searchField=e),options:g.searchableList,label:"Recherche sur"},{append:(0,t.w5)((()=>[(0,t.Wm)(h,{name:"blur_on",color:"orange"})])),_:1},8,["modelValue","options"]),(0,t.Wm)(h,{class:"q-mr-sm",style:{"font-size":"2em"},name:"add_circle",onClick:g.onAddNew},null,8,["onClick"]),(0,t._)("div",i,[(0,t.Wm)(h,{class:"q-mr-sm",style:{"font-size":"2em"},name:"refresh",onClick:g.onRefresh},null,8,["onClick"]),g.inLoad?((0,t.wg)(),(0,t.j4)(W,{key:0,style:{"font-size":"2em"},color:"orange"})):(0,t.kq)("",!0)])]),0===g.status?((0,t.wg)(),(0,t.iD)("h4",u,(0,o.zw)(g.erreur),1)):(0,t.kq)("",!0),g.data.length?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(q,{color:"primary",rows:g.dataFiltered,columns:g.columns,pagination:g.initialPagination,loading:g.inLoad,"row-key":"id",dense:"",onRowClick:g.onRowClick,flat:""},null,8,["rows","columns","pagination","loading","onRowClick"])])):(0,t.kq)("",!0),g.dataFiltered.length?((0,t.wg)(),(0,t.iD)("div",c,[(0,t.Wm)(q,{color:"secondary",rows:g.dataFiltered,columns:g.columns,pagination:g.initialPagination,loading:g.inLoad,"row-key":"id",dense:"",onRowClick:g.onRowClick,flat:""},{body:(0,t.w5)((e=>[(0,t.Wm)(C,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{key:"but1",style:{color:"'red'"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{style:{"font-size":"1.5em","background-color":"'red'"},name:"edit",onClick:l=>g.onTest(e.row)},null,8,["onClick"])])),_:2},1024),(0,t.Wm)(_,{key:"but2"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"q-mr-sm",style:{"font-size":"1.5em"},name:"delete_forever"})])),_:1}),(0,t.Wm)(_,{key:"id",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{color:"green"},{default:(0,t.w5)((()=>[(0,t.Uk)("#"+(0,o.zw)(e.row.id),1)])),_:2},1024)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"prenom",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.firstname),1)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"nom",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.lastname),1)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"email",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.email),1)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"date",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.reg_date),1)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"password",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.password),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","onRowClick"])])):(0,t.kq)("",!0),(0,t._)("div",m,[(0,t.Wm)(j,{modelValue:g.persistent,"onUpdate:modelValue":l[8]||(l[8]=e=>g.persistent=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"bg-grey text-white",style:{width:"300px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(E,{class:"q-pt-none"},{default:(0,t.w5)((()=>[w,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(g.inputs,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e},[(0,t.Wm)(k,{color:"white",dense:"",filled:"",modelValue:e.text,"onUpdate:modelValue":l=>e.text=l,type:e.type,label:e.label,"lazy-rules":"",rules:e.inputRules,"input-style":{color:"blue"}},null,8,["modelValue","onUpdate:modelValue","type","label","rules"])])))),128))])),_:1}),(0,t.Wm)(U,{align:"right",class:"bg-white text-teal"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{flat:"",label:"ENREGISTRER",onClick:l[5]||(l[5]=e=>g.onUpdate())}),(0,t.Wm)(b,{flat:"",label:"CREER",onClick:l[6]||(l[6]=l=>e.onCreate())}),(0,t.Wm)(b,{flat:"",label:"ANNULER",onClick:l[7]||(l[7]=e=>g.persistent=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var v=a(1959);a(6701),a(2100);const f=()=>{const e=(0,v.iH)([]),l=(0,v.iH)([]),a=(0,v.iH)(null),t=(0,v.iH)(null),o=(0,v.iH)(null),n=async()=>{try{const n=await fetch("http://localhost:3000/users",{method:"GET",headers:{"content-type":"application/json"}});if(console.log(n.ok),!n.ok){console.log("res ko");const e=new Error(n.statusText);throw e.json=n.json(),alert(e),o.value=!1,e}const s=await n.json();e.value=s,l.value=s,a.value=s.erreur,t.value=s.status,o.value=!1}catch(n){o.value=!1,t.value=0,a.value="NETWORK ERROR"}},s=async(n,s)=>{try{const r=await fetch("http://localhost:3000/users/"+n,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(s)});if(console.log(r.ok),!r.ok){console.log("res ko");const e=new Error(r.statusText);throw e.json=r.json(),alert(e),o.value=!1,e}const i=await r.json();e.value=i,l.value=i,a.value=i.erreur,t.value=i.status,o.value=!1}catch(r){o.value=!1,t.value=0,a.value="NETWORK ERROR"}};return{data:e,dataFiltered:l,status:t,erreur:a,inLoad:o,load:n,update:s}},b=f;var h=a(1082),k=a(8825);const y=[{name:"but1",required:!1,align:"center",label:"Edit",align:"right",sortable:!0,searchable:!1},{name:"but2",label:"Delete",align:"center",sortable:!0,searchable:!0},{name:"id",required:!1,label:"ID",align:"right",field:e=>e.id,sortable:!0,searchable:!1},{name:"prenom",align:"left",label:"PRENOM",field:"firstname",sortable:!0,searchable:!0},{name:"nom",align:"left",label:"NOM",field:"lastname",sortable:!0,searchable:!0,searchDefault:!0},{name:"email",align:"left",label:"E-MAIL",field:"email",sortable:!0,searchable:!0},{name:"date",align:"left",label:"DATE",field:"reg_date",format:e=>h.ZP.formatDate(e,"DD-MM-YYYY"),sortable:!0,serchable:!1},{name:"password",align:"left",label:"MOT DE PASSE",field:"password",sortable:!1,searchable:!1}],x={name:"myForm",setup(){(0,k.Z)();const e=(0,v.iH)(null),l=(0,v.iH)(null),a=(0,v.iH)(!1),o=(0,v.iH)(!1),n=(0,v.iH)(),s=(0,v.iH)([{text:"",name:"fistname",type:"text",label:"Prénom",inputRules:[e=>e&&e.length>0||"Renseigner le prénom"]},{text:"",name:"lastname",type:"text",label:"Nom",inputRules:[e=>e&&e.length>0||"Renseigner le nom"]},{text:"",name:"email",type:"mail",label:"Email",inputRules:[e=>e&&e.length>0||"Renseigner email"]},{text:"",name:"password",type:"password",label:"Mot de passe",inputRules:[e=>e&&e.length>0||"Renseigner email"]}]),r=(0,v.iH)(null),{data:i,dataFiltered:u,erreur:d,status:c,inLoad:m,load:p,update:w}=b(),g=(0,v.iH)(),f=(0,v.iH)({searchLabel:"Article"}),h=(0,v.iH)(""),x=y.filter((e=>e.searchable)),R=(0,v.iH)(y.filter((e=>e.searchDefault))[0].label),W=(0,v.iH)(y.filter((e=>e.searchDefault))[0]),q=((0,v.iH)(),(0,t.YP)(h,(()=>{console.log(h.value),u.value=j(W.value["field"])})),(0,t.YP)(W,(()=>{R.value=W.value["label"],h.value="",r.value.focus()})),(0,t.m0)((()=>{console.log("watcheffect",m.value)}))),_=()=>{c.value=null,d.value=null,h.value="",m.value=!0,setTimeout(p,300),console.log(u.value),q()},C=(e,l)=>{console.log(l),n.value=l.id,s.value[0].text=l.firstname,s.value[1].text=l.lastname,s.value[2].text=l.email,s.value[3].text=l.password,o.value=!0},E=e=>{console.log(e),n.value=e.id,s.value[0].text=e.firstname,s.value[1].text=e.lastname,s.value[2].text=e.email,s.value[3].text=e.password,o.value=!0},U=()=>{o.value=!1,g.value={firstname:s.value[0].text,lastname:s.value[1].text,email:s.value[2].text,password:s.value[3].text},console.log(g.value),w(n.value,g.value).then((()=>{u.value=j(W.value["field"])}))},H=()=>{o.value=!0,s.value[0].text="",s.value[1].text="",s.value[2].text="",s.value[3].text=""},j=e=>{const l=i.value.filter((l=>l[e].includes(h.value)));return console.log(l),l};return(0,t.bv)((()=>{console.log("onMounted")})),(0,t.Ah)((()=>{console.log("unMounted")})),m.value=!0,setTimeout(p,1e3),{initialPagination:{sortBy:"asc",descending:!0,page:1,rowsPerPage:10},formSetUp:f,text:h,onRefresh:_,dataFiltered:u,data:i,columns:y,onRowClick:C,erreur:d,status:c,inLoad:m,searchInput:r,searchField:W,searchableList:x,searchLabel:R,name:e,age:l,accept:a,inputs:s,persistent:o,update:w,onUpdate:U,onAddNew:H,onTest:E,dataId:n,dataModel:g,onSubmit(){!0!==a.value?console.log("You need to accept the license and terms first"):console.log("Submitted")},onReset(){e.value=null,l.value=null,a.value=!1}}}};var R=a(4260),W=a(9570),q=a(8240),_=a(4842),C=a(4554),E=a(9721),U=a(7637),H=a(126),j=a(4993),D=a(8186),T=a(3884),Z=a(6778),V=a(151),z=a(5589),Q=a(9367),L=a(7518),M=a.n(L);const P=(0,R.Z)(x,[["render",g]]),F=P;M()(x,"components",{QToolbar:W.Z,QBtn:q.Z,QInput:_.Z,QIcon:C.Z,QBadge:E.Z,QSelect:U.Z,QSpinnerClock:H.Z,QTable:j.Z,QTr:D.Z,QTd:T.Z,QDialog:Z.Z,QCard:V.Z,QCardSection:z.Z,QCardActions:Q.Z})}}]);