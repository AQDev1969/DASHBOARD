"use strict";(self["webpackChunkhc2"]=self["webpackChunkhc2"]||[]).push([[208],{5208:(e,i,n)=>{n.r(i),n.d(i,{default:()=>B});var l=n(3673),t=n(2323);const r={class:"q-pa-md"},a={class:"row no-wrap items-center"},u={class:"col text-h7 ellipsis"},s={class:"col-auto q-ml-md text-grey text-caption row no-wrap items-center"},o=(0,l._)("div",{class:"text-subtitle1"}," Ordres de sortie : ",-1),c={class:"text-caption text-grey"},d={class:"text-caption text-grey"},b={class:"row",style:{width:"100%"}},h={class:"q-mr-sm"},p={class:"col-2 q-pt-sm"},m=(0,l.Uk)("SALLE"),g={class:"ligneHour"},v={class:"lignePlanning"},f={class:"item",style:{"font-size":"clamp(0.7em,0.7vw,1em)",height:"50%"}},w={class:"subitem"},k={style:{display:"flex","flex-flow":"no wrap",overflow:"hidden"}},x={class:"item",style:{"font-size":"0.9em",height:"50%"}},T={class:"subitem"};function U(e,i,n,U,D,N){const y=(0,l.up)("q-icon"),O=(0,l.up)("q-card-section"),L=(0,l.up)("q-separator"),P=(0,l.up)("q-badge"),_=(0,l.up)("q-slider"),W=(0,l.up)("vue3-barcode"),E=(0,l.up)("q-btn"),J=(0,l.up)("q-card-actions"),S=(0,l.up)("q-card"),H=(0,l.up)("q-dialog"),G=(0,l.up)("q-th"),C=(0,l.up)("q-tr"),A=(0,l.up)("q-td"),I=(0,l.up)("q-table"),q=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(H,{modelValue:e.card,"onUpdate:modelValue":i[2]||(i[2]=i=>e.card=i)},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("div",u," Num Inter : "+(0,t.zw)(e.interSelected.numinter),1),(0,l._)("div",s,[(0,l.Wm)(y,{name:"place"}),(0,l.Uk)(" "+(0,t.zw)(e.interSelected.chirurgien),1)])])])),_:1}),(0,l.Wm)(L),(0,l.Wm)(O,{class:"q-pb-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{color:"secondary"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Réservations: "+(0,t.zw)(e.interSelected.nblires)+"/"+(0,t.zw)(e.interSelected.nbli),1)])),_:1}),(0,l.Wm)(_,{modelValue:e.interSelected.nblires,"onUpdate:modelValue":i[0]||(i[0]=i=>e.interSelected.nblires=i),color:"orange",min:0,max:e.interSelected.nbli,readonly:""},null,8,["modelValue","max"]),(0,l.Wm)(P,{color:"secondary"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Picking: "+(0,t.zw)(e.interSelected.nblipick)+"/"+(0,t.zw)(e.interSelected.nbli),1)])),_:1}),(0,l.Wm)(_,{modelValue:e.interSelected.nblipick,"onUpdate:modelValue":i[1]||(i[1]=i=>e.interSelected.nblipick=i),color:"green",min:0,max:e.interSelected.nbli,readonly:""},null,8,["modelValue","max"])])),_:1}),(0,l.Wm)(L),(0,l.Wm)(O,{class:"q-pt-none"},{default:(0,l.w5)((()=>[o,(0,l._)("div",c,(0,t.zw)(e.interSelected.os),1),(0,l._)("div",d,(0,t.zw)(e.interSelected.vague),1),(0,l.Wm)(W,{value:"PH1985",height:50})])),_:1}),(0,l.Wm)(L),(0,l.Wm)(J,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(E,{flat:"",color:"primary",label:"Quitter"},null,512),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(I,{class:"my-sticky-header-column-table",title:"Planning Interventions",dense:!0,rows:e.rows,columns:e.columns,fullscreen:!1,loading:!1,"rows-per-page-options":[0],"row-key":"ressource"},{top:(0,l.w5)((n=>[(0,l._)("div",b,[(0,l._)("div",h,[(0,l.Wm)(E,{flat:"",round:"",dense:"",icon:n.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n.toggleFullscreen},null,8,["icon","onClick"])]),(0,l._)("div",p,[(0,l.Wm)(_,{dense:"",modelValue:e.displayWidth,"onUpdate:modelValue":i[3]||(i[3]=i=>e.displayWidth=i),color:"deep-orange",step:400,snap:"",min:600,max:1e4},null,8,["modelValue"])]),(0,l.Wm)(E,{flat:"",color:"primary",label:"Flat",onClick:i[4]||(i[4]=i=>e.changeData())})])])),header:(0,l.w5)((i=>[(0,l.Wm)(C,{props:i},{default:(0,l.w5)((()=>[(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l._)("div",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.hourGrid,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,style:{position:"absolute"}},[(0,l._)("div",{style:(0,t.j5)([{position:"absolute","padding-left":"3px","border-left":"solid green 1px",height:"20px"},{left:e.x+"px"}])},(0,t.zw)(e.h)+"h",5)])))),128))])])),_:1})])),_:2},1032,["props"])])),body:(0,l.w5)((i=>[(0,l.Wm)(C,{props:i},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{key:"ressource",props:i},{default:(0,l.w5)((()=>[(0,l.Uk)((0,t.zw)(i.row.ressource),1)])),_:2},1032,["props"]),(0,l.Wm)(A,{key:"ligneinter",props:i},{default:(0,l.w5)((()=>[(0,l._)("div",v,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.row.listinter,(i=>((0,l.wg)(),(0,l.j4)(S,{class:"wraper my-card bg-secondary text-white",key:i.numinter,onClick:n=>e.interDetail(i),style:(0,t.j5)([{height:"100%",position:"absolute",cursor:"pointer",border:"solid 1px black"},{left:i.x+"px",width:i.w+"px"}])},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l._)("div",w,[(0,l._)("div",k,[(0,l.Wm)(P,{color:"white","text-color":"black",style:{"margin-right":"2px","font-size":"1em"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,t.zw)(i.numinter),1)])),_:2},1024),(0,l._)("span",null,(0,t.zw)(i.chirurgien),1)])]),(0,l.Wm)(P,{"text-color":"white",style:{border:"solid white 1px"},color:i.statut,floating:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,t.zw)(i.nbli),1)])),_:2},1032,["color"])]),(0,l.Wm)(L,{inset:"",dark:""}),(0,l._)("div",x,[(0,l._)("div",T,(0,t.zw)(i.libelle),1)])])),_:2},1032,["onClick","style"])))),128))])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])}var D=n(1959),N=n(5132);n(6701),n(2100);const y=()=>{const e=(0,D.iH)([]),i=(0,D.iH)([]),n=(0,D.iH)(null),l=(0,D.iH)(null),t=(0,D.iH)(null);e.value=[{ressource:"SALLE 1",listinter:[{numinter:"1249",libelle:"GENOU - MOB sous AG PTG",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"7:45",heurefin:"8:15",os:"OS0000000010",vague:"CE930",nbli:12,nblires:0,nblipick:12,statut:0},{numinter:"1250",libelle:"GENOU - MOB sous AG PTG",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"8:15",heurefin:"9:00",nbli:21,nblires:0,nblipick:21,statut:0},{numinter:"1251",libelle:"GENOU - Video MINT",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"9:00",heurefin:"9:30",nbli:16,nblires:0,nblipick:16,statut:0},{numinter:"1252",libelle:"GENOU - PTG",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"9:30",heurefin:"10:40",nbli:16,nblires:0,nblipick:16,statut:0},{numinter:"1253",libelle:"GENOU - Video MINT",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"10:40",heurefin:"11:10",nbli:22,nblires:10,nblipick:12,statut:0},{numinter:"1254",libelle:"GENOU - PTG",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"11:10",heurefin:"12:20",nbli:18,nblires:6,nblipick:12,statut:0},{numinter:"1255",libelle:"GENOU - MOB sous AG PTG",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"12:20",heurefin:"12:35",nbli:12,nblires:12,nblipick:0,statut:0},{numinter:"1256",libelle:"GENOU - PTG",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"12:35",heurefin:"13:45",nbli:26,nblires:16,nblipick:0,statut:0},{numinter:"1257",libelle:"EPAULE - Réparation de la coiffe sous vidéo",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"13:45",heurefin:"15:15",nbli:18,nblires:16,nblipick:0,statut:0},{numinter:"1258",libelle:"GENOU - PTG",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"15:15",heurefin:"16:25",nbli:22,nblires:0,nblipick:0,statut:0},{numinter:"1259",libelle:"HANCHE - PTH voie post",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"16:25",heurefin:"17:25",nbli:23,nblires:23,nblipick:0,statut:0},{numinter:"1260",libelle:"HANCHE - PTH voie post",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"17:25",heurefin:"18:35",nbli:19,nblires:16,nblipick:0,statut:0}]},{ressource:"SALLE 2",listinter:[{numinter:"1261",libelle:"Canal carpien Droit",chirurgien:"Jean Louis DUPONT",date:"03/05/2022",heuredeb:"8:00",heurefin:"8:20",nbli:12,nblires:0,nblipick:12,statut:0},{numinter:"1262",libelle:"Canal carpien Droit",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"8:20",heurefin:"8:40",nbli:16,nblires:11,nblipick:5,statut:0},{numinter:"1263",libelle:"Canal carpien Gauche",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"8:40",heurefin:"9:00",nbli:15,nblires:11,nblipick:4,statut:0},{numinter:"1264",libelle:"Canal carpien Droit",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"9:00",heurefin:"9:20",nbli:12,nblires:12,nblipick:0,statut:0},{numinter:"1265",libelle:"Tenosynovite",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"9:20",heurefin:"9:50",nbli:12,nblires:11,nblipick:0,statut:0},{numinter:"1266",libelle:"Tenosynovite",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"9:50",heurefin:"10:20",nbli:12,nblires:12,nblipick:0,statut:0},{numinter:"1267",libelle:"Canal Carpien Droit",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"14:00",heurefin:"14:20",nbli:22,nblires:22,nblipick:0,statut:0},{numinter:"1268",libelle:"Trapezectomie",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"14:20",heurefin:"15:00",nbli:14,nblires:14,nblipick:0,statut:0},{numinter:"1269",libelle:"Trapezectomie",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"15:00",heurefin:"15:40",nbli:18,nblires:0,nblipick:0,statut:0},{numinter:"1270",libelle:"Canal carpien gauche",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"15:40",heurefin:"16:00",nbli:12,nblires:0,nblipick:0,statut:0},{numinter:"1271",libelle:"Tenosynovite Gauche",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"16:00",heurefin:"16:30",nbli:16,nblires:16,nblipick:0,statut:0},{numinter:"1272",libelle:"Luxation Droit",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"16:30",heurefin:"16:45",nbli:21,nblires:0,nblipick:0,statut:0},{numinter:"1273",libelle:"Canal carpien droit",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"16:45",heurefin:"17:05",nbli:12,nblires:12,nblipick:0,statut:0},{numinter:"1273",libelle:"Tenosynpvite droit",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"17:05",heurefin:"17:35",nbli:19,nblires:0,nblipick:0,statut:0}]},{ressource:"SALLE 3",listinter:[{numinter:"1249",libelle:"Intervention xxx",chirurgien:"Jean Louis DUPONT",date:"03/05/2022",heuredeb:"9:00",heurefin:"10:30",nbli:12,nblires:11,nblipick:1,statut:0},{numinter:"1250",libelle:"Intervention xxx",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"12:00",heurefin:"12:30",nbli:21,nblires:11,nblipick:10,statut:0},{numinter:"1248",libelle:"Intervention xxx",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"07:30",heurefin:"09:15",nbli:17,nblires:11,nblipick:6,statut:0}]},{ressource:"SALLE 4",listinter:[{numinter:"1447",libelle:"Intervention xxx",chirurgien:"Jean Louis DUPONT",date:"02/05/2022",heuredeb:"10:00",heurefin:"12:27",nbli:18,nblires:0,nblipick:18,statut:0},{numinter:"12746",libelle:"Intervention xxx",chirurgien:"JMB",date:"02/05/2022",heuredeb:"13:00",heurefin:"14:00",nbli:15,nblires:0,nblipick:15,statut:0}]},{ressource:"SALLE 5",listinter:[{numinter:"1249",libelle:"Intervention xxx",chirurgien:"Alain DURAND",date:"03/05/2022",heuredeb:"8:00",heurefin:"8:30",nbli:10,nblires:0,nblipick:10,statut:0},{numinter:"1250",libelle:"Intervention xxx",chirurgien:"Alain DURAND",date:"02/05/2022",heuredeb:"09:00",heurefin:"10:30",nbli:17,nblires:0,nblipick:17,statut:0},{numinter:"1248",libelle:"Intervention xxx",chirurgien:"Alain DURAND",date:"02/05/2022",heuredeb:"11:00",heurefin:"13:15",nbli:12,nblires:11,nblipick:1,statut:0}]},{ressource:"SALLE 6",listinter:[{numinter:"1460",libelle:"Intervention xxx",chirurgien:"Bernard MARTIN",date:"02/05/2022",heuredeb:"07:00",heurefin:"11:27",nbli:18,nblires:0,nblipick:18,statut:0},{numinter:"12766",libelle:"Intervention xxx",chirurgien:"Bernard MARTIN",date:"02/05/2022",heuredeb:"14:00",heurefin:"19:00",nbli:0,nblires:0,nblipick:0,statut:0}]}];const r=async()=>{try{const r=await fetch("http://localhost:3000/users",{method:"GET",headers:{"content-type":"application/json"}});if(console.log(r.ok),!r.ok){console.log("res ko");const e=new Error(r.statusText);throw e.json=r.json(),alert(e),t.value=!1,e}const a=await r.json();e.value=a,i.value=a,n.value=a.erreur,l.value=a.status,t.value=!1}catch(r){t.value=!1,l.value=0,n.value="NETWORK ERROR"}},a=async(r,a)=>{try{const u=await fetch("http://localhost:3000/users/"+r,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(a)});if(console.log(u.ok),!u.ok){console.log("res ko");const e=new Error(u.statusText);throw e.json=u.json(),alert(e),t.value=!1,e}const s=await u.json();e.value=s,i.value=s,n.value=s.erreur,l.value=s.status,t.value=!1}catch(u){t.value=!1,l.value=0,n.value="NETWORK ERROR"}};return{data:e,dataFiltered:i,status:l,erreur:n,inLoad:t,load:r,update:a}},O=y,L=[{name:"ressource",required:!0,label:"RESSOURCE",align:"left",field:e=>e.ressource,sortable:!0,style:"width:8%"},{name:"ligneinter",align:"center",label:"HEURES",field:"listinter",sortable:!0}],P=(0,l.aZ)({name:"planning",components:{Vue3Barcode:N.Z},setup(){const{data:e,dataFiltered:i,erreur:n,status:t,inLoad:r,load:a,update:u}=O(),s=(0,D.iH)("02/05/2022"),o=(0,D.iH)(7),c=(0,D.iH)(19),d=(0,D.iH)(1500),b=(0,D.iH)(),h=(0,D.iH)(d.value/(c.value-o.value)),p=(0,D.iH)(!1),m=(0,D.iH)({}),g=()=>{const e=[];for(var i=0;i<=c.value-o.value;i++)e.push({id:i,h:i+o.value,x:i*h.value});return e},v=Math.max.apply(Math,e.value.map((function(e){})));console.log("minHour",v);const f=()=>e.value.map((e=>{const i={};return i.ressource=e.ressource,i.listinter=e.listinter.filter((e=>e.date==s.value)).map((e=>{const i={};i.numinter=e.numinter,i.libelle=e.libelle,i.chirurgien=e.chirurgien,i.date=e.date,i.os=e.os,i.vague=e.vague;const n=e.heuredeb.split(":"),l=(parseInt(n[0])+parseInt(n[1])/60-o.value)*h.value+4;console.log(n[0]+n[1]/60);const t=e.heurefin.split(":"),r=(parseInt(t[0])+parseInt(t[1])/60-o.value)*h.value-4;switch(i.x=l,i.w=r-l,i.heuredeb=e.heuredeb,i.heurefin=e.heurefin,i.nbli=e.nbli,i.nblires=e.nblires+e.nblipick,i.nblipick=e.nblipick,e.nbli-e.nblipick){case 0:i.statut="green";break;case e.nbli:i.statut="red";break;default:i.statut="orange"}return i})),i})),w=(0,D.iH)(f()),k=(0,D.iH)(g());console.log(w);const x=(0,l.YP)(d,(()=>{console.log(d.value),h.value=d.value/(c.value-o.value),k.value=g(),w.value=f()})),T=(0,l.YP)(e.value,(()=>{console.log("datachange")})),U=e=>{p.value=!0,m.value=e},N=()=>{console.log("changeData click"),console.log(e.value[0].listinter[0].nblires),e.value[0].listinter[0].nbli=99,w.value=f()};return{columns:L,rows:w,selectDate:s,displayHdeb:o,displayHfin:c,displayWidth:d,scale:b,hourGrid:k,watchSlider:x,interDetail:U,card:p,interSelected:m,watchData:T,changeData:N}}});var _=n(4260),W=n(6778),E=n(151),J=n(5589),S=n(4554),H=n(5869),G=n(9721),C=n(2064),A=n(9367),I=n(8240),q=n(2991),z=n(8186),R=n(2414),Z=n(3884),Q=n(677),V=n(7518),j=n.n(V);const M=(0,_.Z)(P,[["render",U]]),B=M;j()(P,"components",{QDialog:W.Z,QCard:E.Z,QCardSection:J.Z,QIcon:S.Z,QSeparator:H.Z,QBadge:G.Z,QSlider:C.Z,QCardActions:A.Z,QBtn:I.Z,QTable:q.Z,QTr:z.Z,QTh:R.Z,QTd:Z.Z}),j()(P,"directives",{ClosePopup:Q.Z})}}]);