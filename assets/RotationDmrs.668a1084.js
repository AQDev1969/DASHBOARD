var k=Object.defineProperty,w=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var H=(e,r,E)=>r in e?k(e,r,{enumerable:!0,configurable:!0,writable:!0,value:E}):e[r]=E,O=(e,r)=>{for(var E in r||(r={}))G.call(r,E)&&H(e,E,r[E]);if(Q)for(var E of Q(r))J.call(r,E)&&H(e,E,r[E]);return e},v=(e,r)=>w(e,q(r));import{a as Y,Q as z}from"./QSpace.f0f0572b.js";import{Q as j,a as P}from"./QTable.4cbf6e8d.js";import{br as x,bC as W,bD as K,Q as I,ac as R,bA as f,by as Z,c7 as $,c8 as ee,ck as ae,bs as le,k as X,bz as te,ay as N,W as B,a2 as l,b1 as n,bB as y,A as se,a1 as L,D as T,X as S,I as oe,aE as ne,U as re,V as ie}from"./index.95299443.js";import{Q as Ee}from"./QInput.cff1f400.js";import{Q as ue}from"./QTd.dc40ade6.js";import{a as ce,Q as de}from"./QBadge.8ee2af2e.js";import{c as Le,b as g,Q as M,a as V}from"./QItem.9fe04770.js";import{Q as Te}from"./QCard.ac9751f5.js";import{e as Xe}from"./exportService.5a12f7c6.js";import{d as h}from"./date.5b498343.js";import"./use-dark.c1a0b6e7.js";import"./use-checkbox.af802474.js";import"./selection.6e7343eb.js";import"./use-key-composition.a888e9b8.js";import"./format.2bc25e5f.js";var F=x({name:"QBreadcrumbsEl",props:v(O({},W),{label:String,icon:String,tag:{type:String,default:"span"}}),setup(e,{slots:r}){const{linkTag:E,linkProps:s,linkClass:A,hasRouterLink:C,navigateToRouterLink:t}=K(),a=I(()=>{const o=O({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+A.value:"q-breadcrumbs__el--disable")},s.value);return C.value===!0&&(o.onClick=t),o}),i=I(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const o=[];return e.icon!==void 0&&o.push(R(f,{class:i.value,name:e.icon})),e.label!==void 0&&o.push(e.label),R(E.value,O({},a.value),Z(r.default,o))}}});const Ae=[void 0,!0];var Ce=x({name:"QBreadcrumbs",props:v(O({},$),{separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}}),setup(e,{slots:r}){const E=ee(e),s=I(()=>`flex items-center ${E.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),A=I(()=>e.separatorColor?` text-${e.separatorColor}`:""),C=I(()=>` text-${e.activeColor}`);return()=>{const t=ae(le(r.default));if(t.length===0)return;let a=1;const i=[],o=t.filter(c=>c.type!==void 0&&c.type.name==="QBreadcrumbsEl").length,u=r.separator!==void 0?r.separator:()=>e.separator;return t.forEach(c=>{if(c.type!==void 0&&c.type.name==="QBreadcrumbsEl"){const m=a<o,p=c.props!==null&&Ae.includes(c.props.disable),_=(m===!0?"":" q-breadcrumbs--last")+(p!==!0&&m===!0?C.value:"");a++,i.push(R("div",{class:`flex items-center${_}`},[c])),m===!0&&i.push(R("div",{class:"q-breadcrumbs__separator"+A.value},u()))}else i.push(c)}),R("div",{class:"q-breadcrumbs"},[R("div",{class:s.value},i)])}}});const Re=()=>{const e=X([]);e.value=[{DATEXEC:"2022-06-02T00:00:00",REFXART:"S1399",LIBXART:"FARABEUF PETIT",FAMDMRS:null,NB:1,EVALNB:1,COMPOS:"1399",DATELIV:"2022-06-17T00:00:00",DIFF:15,HLDXCVE:null,QTEXCVL:1,NUMXCVE:"3007",REFXCVE:"HYSTEROCTOMIE V BASSE",NOMXCLI:"BERNARD Thomas",VILXCLI:"ORL",NOMXTOU:null},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S3425",LIBXART:"COELIOSCOPIE",FAMDMRS:"DIGESTIF",NB:8,EVALNB:8,COMPOS:"1416 | 1419 | 1420 | 1421 | 1423 | 2664 | 3341 | 3425",DATELIV:"2022-06-17T00:00:00",DIFF:15,HLDXCVE:null,QTEXCVL:1,NUMXCVE:"3007",REFXCVE:"HYSTEROCTOMIE V BASSE",NOMXCLI:"BERNARD Thomas",VILXCLI:"ORL",NOMXTOU:null},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S42",LIBXART:"HALLUX",FAMDMRS:"ORTHOPEDIE",NB:4,EVALNB:3,COMPOS:"42 | 43 | 45",DATELIV:"2022-06-13T00:00:00",DIFF:11,HLDXCVE:"08:00",QTEXCVL:1,NUMXCVE:"3000",REFXCVE:"HALLUX VALGUS",NOMXCLI:"DUPONT Jean Louis",VILXCLI:"ORTHO",NOMXTOU:"SALLE3"},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S42",LIBXART:"HALLUX",FAMDMRS:"ORTHOPEDIE",NB:4,EVALNB:3,COMPOS:"42 | 43 | 45",DATELIV:"2022-06-13T00:00:00",DIFF:11,HLDXCVE:"10:00",QTEXCVL:1,NUMXCVE:"3001",REFXCVE:"HALLUX VALGUS",NOMXCLI:"DUPONT Jean Louis",VILXCLI:"ORTHO",NOMXTOU:"SALLE3"},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S42",LIBXART:"HALLUX",FAMDMRS:"ORTHOPEDIE",NB:4,EVALNB:3,COMPOS:"42 | 43 | 45",DATELIV:"2022-06-13T00:00:00",DIFF:11,HLDXCVE:"11:00",QTEXCVL:1,NUMXCVE:"3002",REFXCVE:"HALLUX VALGUS",NOMXCLI:"DUPONT Jean Louis",VILXCLI:"ORTHO",NOMXTOU:"SALLE1"},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S42",LIBXART:"HALLUX",FAMDMRS:"ORTHOPEDIE",NB:4,EVALNB:3,COMPOS:"42 | 43 | 45",DATELIV:"2022-06-13T00:00:00",DIFF:11,HLDXCVE:"11:30",QTEXCVL:1,NUMXCVE:"3003",REFXCVE:"HALLUX VALGUS",NOMXCLI:"DUPONT Jean Louis",VILXCLI:"ORTHO",NOMXTOU:"SALLE1"},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S42",LIBXART:"HALLUX",FAMDMRS:"ORTHOPEDIE",NB:4,EVALNB:3,COMPOS:"42 | 43 | 45",DATELIV:"2022-06-13T00:00:00",DIFF:11,HLDXCVE:"13:30",QTEXCVL:1,NUMXCVE:"3004",REFXCVE:"HALLUX VALGUS",NOMXCLI:"DUPONT Jean Louis",VILXCLI:"ORTHO",NOMXTOU:"SALLE1"},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S42",LIBXART:"HALLUX",FAMDMRS:"ORTHOPEDIE",NB:4,EVALNB:3,COMPOS:"42 | 43 | 45",DATELIV:"2022-06-16T00:00:00",DIFF:14,HLDXCVE:"15:00",QTEXCVL:1,NUMXCVE:"3005",REFXCVE:"HALLUX VALGUS",NOMXCLI:"DUPONT Jean Louis",VILXCLI:"ORTHO",NOMXTOU:"SALLE1"},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S4233",LIBXART:"PLATEAU CAROTIDE",FAMDMRS:null,NB:1,EVALNB:1,COMPOS:"4233",DATELIV:"2022-06-02T00:00:00",DIFF:0,HLDXCVE:null,QTEXCVL:1,NUMXCVE:"TEST",REFXCVE:"INTER DATE",NOMXCLI:"DUPONT Jean Louis",VILXCLI:"ORTHO",NOMXTOU:"SALLE1"},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S4264",LIBXART:"PAD ADSON A GRIFFE",FAMDMRS:"ESTHETIQUE",NB:1,EVALNB:1,COMPOS:"4264",DATELIV:"2022-06-17T00:00:00",DIFF:15,HLDXCVE:null,QTEXCVL:1,NUMXCVE:"3007",REFXCVE:"HYSTEROCTOMIE V BASSE",NOMXCLI:"BERNARD Thomas",VILXCLI:"ORL",NOMXTOU:null},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S763",LIBXART:"MUSEUX  PINCE",FAMDMRS:"VISCERAL",NB:1,EVALNB:1,COMPOS:"763",DATELIV:"2022-06-17T00:00:00",DIFF:15,HLDXCVE:null,QTEXCVL:1,NUMXCVE:"3007",REFXCVE:"HYSTEROCTOMIE V BASSE",NOMXCLI:"BERNARD Thomas",VILXCLI:"ORL",NOMXTOU:null},{DATEXEC:"2022-06-02T00:00:00",REFXART:"S939",LIBXART:"ULTRACISION  PAM [M]",FAMDMRS:"O.R.L",NB:8,EVALNB:8,COMPOS:"10260 | 10261 | 1367 | 1916 | 1917 | 2168 | 6940 | 939",DATELIV:"2022-06-17T00:00:00",DIFF:15,HLDXCVE:null,QTEXCVL:1,NUMXCVE:"3007",REFXCVE:"HYSTEROCTOMIE V BASSE",NOMXCLI:"BERNARD Thomas",VILXCLI:"ORL",NOMXTOU:null}];const r=X([...new Set(e.value.map(a=>a.REFXART))]),E=X([]),s=X(16),A=X(e.value[0].DATEXEC),C=()=>{const a=[];let i="",o=-1;for(let u=0;u<e.value.length;u++)if(e.value[u].REFXART===i){const c=a[o][e.value[u].DIFF]+e.value[u].QTEXCVL;a[o][e.value[u].DIFF]=c,c>a[o].MAX&&(a[o].MAX=c)}else{o=o+1,a.push({REFXART:e.value[u].REFXART,LIBXART:e.value[u].LIBXART,FAMDMRS:e.value[u].FAMDMRS,NB:e.value[u].NB,EVALNB:e.value[u].EVALNB,COMPOS:e.value[u].COMPOS}),a[o].MAX=e.value[u].QTEXCVL;for(let c=0;c<s.value;c++)a[o][c]=0,a[o]["T"+c]=0;a[o][e.value[u].DIFF]=e.value[u].QTEXCVL,i=e.value[u].REFXART}return a},t=a=>{for(let i=0;i<a.length;i++){a[i].TMAX=Math.round(a[i].MAX/a[i].NB*100);for(let o=0;o<s.value;o++)a[i]["T"+o]=a[i][o]/a[i].NB}return a};return E.value=t(C()),{data:e,data2:r,rows:E,nbDate:s,startDate:A}};const me={setup(){const{data:e,data2:r,rows:E,nbDate:s,startDate:A}=Re(),{exportTable:C}=Xe(),t=X([]),a=X(),i=[{name:"REFXART",align:"LEFT",label:"DMRS",field:"REFXART",sortable:!0,searchable:!0},{name:"LIBXART",align:"LEFT",label:"LIBELLE",field:"LIBXART",sortable:!0,searchable:!0},{name:"FAMDMRS",align:"LEFT",label:"SPECIALITE",field:"FAMDMRS",sortable:!0},{name:"COMPOS",align:"LEFT",label:"COMPOSITIONS",field:"COMPOS",sortable:!0},{name:"NB",align:"RIGHT",label:"NB",field:"NB",sortable:!0},{name:"EVALNB",align:"LEFT",label:"EVALNB",field:"EVALNB",sortable:!0},{name:"TMAX",align:"center",label:"TMAX",field:"TMAX",sortable:!0,format:(d,b)=>`${d}%`,style:d=>d.TMAX>100?"background-color: red;color: white; font-weight:bold":"color: black;"}],o=X(["REFXART","LIBXART","FAMDMRS","COMPOS","NB","EAVLNB","MAX","TMAX"]),u=i.filter(d=>d.searchable===!0),c=d=>h.formatDate(d,"ddd DD-MM-YY",{daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]});for(let d=0;d<s.value;d++){const b=h.formatDate(h.addToDate(A.value,{days:d}),"DD-MM",{daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]});i.push({name:d,align:"center",label:b,field:d,sortable:!1,style:D=>D[d]>D.NB?"color: red; font-weight:bold":D[d]>0?"color: green; font-weight:bold":"color:black ; font-weight:300"}),o.value.push(d)}const m=X({sortBy:"desc",descending:!1,page:1,rowsPerPage:0});return{data:e,rows:E,columns:i,searchColumns:u,searchField:a,pagination:m,visibleColumns:o,besoinDetail:(d,b)=>{const D=e.value.filter(U=>U.REFXART===d&&U.DIFF===b);t.value=D,console.log(t.value)},selectedData:t,formDate:c,exportCsv:()=>{C(i,E,"RotationDMRS")}}}},De={class:"q-pa-md"},Oe=S("img",{style:{height:"50px",width:"50px"},src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSBT5bDcArRQ2x9BSby_hmhiEWS8ro58hwn-Q&usqp=CAU"},null,-1),Me=S("span",{class:"q-ml-md"},"Taux de Rotation - DMRS",-1),Ve={key:0},Ie={class:"q-pa-sm q-gutter-sm"},Se={class:"q-pa-sm row items-start q-gutter-md"},be={class:"q-ma-sm"};function Ne(e,r,E,s,A,C){return N(),B("div",De,[l(j,{id:"tableDMRS",class:"tableDMRS",title:"Taux de rotation des DMRS",dense:"",rows:s.rows,columns:s.columns,pagination:s.pagination,"row-key":"REFXART","visible-columns":s.visibleColumns,separator:"none"},{top:n(t=>[Oe,Me,l(Y),l(P,{class:"q-mr-sm",outlined:"",dense:"","options-dense":"","transition-show":"scale","transition-hide":"scale","label-color":"orange",label:"recherche",modelValue:s.searchField,"onUpdate:modelValue":r[0]||(r[0]=a=>s.searchField=a),options:s.searchColumns,style:{width:"150px"}},null,8,["modelValue","options"]),l(Ee,{class:"q-mr-sm",outlined:"",dense:""},{append:n(()=>[l(f,{name:"search",color:"orange"})]),_:1}),l(P,{class:"q-mr-sm",modelValue:s.visibleColumns,"onUpdate:modelValue":r[1]||(r[1]=a=>s.visibleColumns=a),"transition-show":"scale","transition-hide":"scale",multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:s.columns,"option-value":"name","options-selected-class":"selectedField",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"]),l(y,{class:"q-mr-sm",color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:s.exportCsv},null,8,["onClick"]),l(y,{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:t.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":n(t=>[l(ue,{props:t,onClick:a=>{s.besoinDetail(t.row.REFXART,t.col.field)},class:se(t.value>0&&t.col.field>=0?"tdHover":"")},{default:n(()=>[L(T(t.value),1)]),_:2},1032,["props","onClick","class"])]),bottom:n(()=>[s.selectedData.length>0?(N(),B("div",Ve,[S("div",Ie,[l(Ce,{separator:"---",class:"text-secondary","active-color":"secondary"},{default:n(()=>[l(F,{label:"Article: ",icon:"article"},{default:n(()=>[L(T(s.selectedData[0].REFXART),1)]),_:1}),l(F,{label:"Libell\xE9: ",icon:"tag"},{default:n(()=>[L(T(s.selectedData[0].LIBXART),1)]),_:1}),l(F,{label:"Compositions: ",icon:"view_list"},{default:n(()=>[L(T(s.selectedData[0].COMPOS),1)]),_:1}),l(F,{label:"Nbre: ",icon:"format_list_numbered"},{default:n(()=>[L(T(s.selectedData[0].NB),1)]),_:1})]),_:1})]),S("div",Se,[(N(!0),B(oe,null,ne(s.selectedData,t=>(N(),re(Te,{key:t.NUMXCVE,flat:"",bordered:"",style:{"max-width":"180px"}},{default:n(()=>[l(Le,{dense:""},{default:n(()=>[S("div",be,[l(ce,null,{default:n(()=>[L("# "+T(t.NUMXCVE),1)]),_:2},1024)]),l(g,{class:"bg-blue-grey-1"},{default:n(()=>[l(M,{avatar:""},{default:n(()=>[l(f,{color:"secondary",name:"schedule"})]),_:1}),l(M,null,{default:n(()=>[l(V,null,{default:n(()=>[L(T(s.formDate(t.DATELIV)),1)]),_:2},1024),l(V,{caption:""},{default:n(()=>[L(T(t.HLDXCVE),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(g,{class:"q-my-sm"},{default:n(()=>[l(M,null,{default:n(()=>[l(V,{class:"text-caption text-blue-grey-9",style:{"word-break":"break-all",height:"50px"}},{default:n(()=>[L(T(t.REFXCVE),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(g,{class:"bg-blue-grey-1"},{default:n(()=>[l(M,{avatar:""},{default:n(()=>[l(f,{color:"warning",name:"manage_accounts"})]),_:1}),l(M,null,{default:n(()=>[l(V,null,{default:n(()=>[L(T(t.NOMXCLI),1)]),_:2},1024),l(V,{caption:""},{default:n(()=>[L(T(t.NOMXTOU),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(de,{dark:"",inset:""}),l(z,null,{default:n(()=>[L(" Qte: "+T(t.QTEXCVL),1)]),_:2},1024)]),_:2},1024))),128))])])):ie("",!0)]),_:1},8,["rows","columns","pagination","visible-columns"])])}var qe=te(me,[["render",Ne]]);export{qe as default};
